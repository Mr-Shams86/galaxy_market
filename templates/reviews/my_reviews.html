{% extends "base.html" %}
{% load extras %}

{% block back_button %}
<a href="javascript:history.back()" class="inline-block bg-gray-300 hover:bg-gray-400 text-black font-bold py-2 px-4 rounded mb-4">
  ‚¨ÖÔ∏è –ù–∞–∑–∞–¥
</a>
{% endblock %}

{% block content %}
<div class="flex justify-center items-start min-h-screen pt-10">
  <div class="lg:col-span-2 p-6 rounded-xl bg-black/30 backdrop-blur text-white border border-gray-700 w-full max-w-2xl">

    <h2 class="text-2xl font-bold mb-6">üí¨ –ú–æ–∏ –æ—Ç–∑—ã–≤—ã</h2>

    <!-- üìå –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞ -->
    <form method="post" class="mb-8">
      {% csrf_token %}
      <div class="mb-4">
        <label for="id_product" class="block mb-1 text-gray-300">–ü—Ä–æ–¥—É–∫—Ç</label>
        {{ form.product|add_class:"w-full p-2 rounded bg-gray-800 border border-gray-600 text-white" }}
      </div>
      <div class="mb-4">
        <label for="id_text" class="block mb-1 text-gray-300">–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞</label>
        {{ form.text|add_class:"w-full p-2 rounded bg-gray-800 border border-gray-600 text-white" }}
      </div>
      <div class="mb-4">
        <label for="id_rating" class="block mb-1 text-gray-300">–û—Ü–µ–Ω–∫–∞</label>
        {{ form.rating|add_class:"w-full p-2 rounded bg-gray-800 border border-gray-600 text-white" }}
      </div>
      <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
        üíæ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
      </button>
    </form>

    {% if reviews %}
      <div class="space-y-4">
        {% for review in reviews %}
          <div class="bg-gray-900 bg-opacity-80 border border-gray-700 p-4 rounded-xl">
            <p class="text-lg font-semibold text-green-400">{{ review.product }}</p>
            <p class="mt-1 text-white">{{ review.text }}</p>
            <p class="mt-2 text-sm text-gray-300">
              –û—Ü–µ–Ω–∫–∞:
              {% for _ in review.rating|star_range %} ‚≠ê {% endfor %}
              {% for _ in 5|subtract:review.rating %} ‚òÜ {% endfor %}
            </p>
            <p class="text-xs text-gray-500 mt-1">–û—Å—Ç–∞–≤–ª–µ–Ω: {{ review.created_at|date:"d.m.Y H:i" }}</p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-center text-gray-400">–í—ã –µ—â—ë –Ω–µ –æ—Å—Ç–∞–≤–ª—è–ª–∏ –æ—Ç–∑—ã–≤–æ–≤.</p>
    {% endif %}

  </div>
</div>
{% endblock %}
