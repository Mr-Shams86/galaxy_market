{% extends "base.html" %}
{% load static %}
{% block back_button %}
<a href="javascript:history.back()" class="inline-block bg-gray-300 hover:bg-gray-400 text-black font-bold py-2 px-4 rounded mb-4">
  ⬅️ Назад
</a>
{% endblock %}
{% block content %}
<div class="flex justify-center items-center min-h-screen">
  <div class="w-full max-w-md bg-blue-50 bg-opacity-90 p-8 rounded-lg shadow-xl">
    <h1 class="text-2xl font-bold text-center text-green-600 mb-6"> Add New Item</h1>

    {# Flash-сообщения #}
    {% if messages %}
      <div class="mb-4">
        {% for message in messages %}
          <div class="p-3 rounded text-white {% if message.tags == 'success' %}bg-green-500{% elif message.tags == 'error' %}bg-red-500{% else %}bg-blue-500{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      {# Name #}
      <div class="mb-4">
        <label for="name" class="block text-gray-700 font-semibold mb-1">Item Name</label>
        <input
          type="text"
          name="name"
          id="name"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"
          placeholder="Enter item name"
          value="{{ form.name.value|default_if_none:'' }}"
        />
        {% if form.name.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.name.errors.0 }}</p>
        {% endif %}
      </div>

      {# Price #}
      <div class="mb-4">
        <label for="price" class="block text-gray-700 font-semibold mb-1">Item Price</label>
        <input
          type="number"
          step="0.01"
          name="price"
          id="price"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"
          placeholder="Enter price"
          value="{{ form.price.value|default_if_none:'' }}"
        />
        {% if form.price.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.price.errors.0 }}</p>
        {% endif %}
      </div>

      {# Description #}
      <div class="mb-4">
        <label for="description" class="block text-gray-700 font-semibold mb-1">Item Description</label>
        <input
          type="text"
          name="description"
          id="description"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"
          placeholder="Enter description"
          value="{{ form.description.value|default_if_none:'' }}"
        />
        {% if form.description.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.description.errors.0 }}</p>
        {% endif %}
      </div>

      {# Category #}
      <div class="mb-4">
        <label for="category" class="block text-gray-700 font-semibold mb-1">Item Category</label>
        <select
          name="category"
          id="category"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"
        >
          <option value="">— Выберите категорию —</option>
          <option value="phones" {% if form.category.value == "phones" %}selected{% endif %}> Phone Parts</option>
          <option value="tablets" {% if form.category.value == "tablets" %}selected{% endif %}> Tablet Parts</option>
          <option value="headphones" {% if form.category.value == "headphones" %}selected{% endif %}> Headphones</option>
          <option value="accessories" {% if form.category.value == "accessories" %}selected{% endif %}> Accessories</option>
          <option value="smart_watch" {% if form.category.value == "smart_watch" %}selected{% endif %}> Smart Watches</option>
          <option value="smart_ring" {% if form.category.value == "smart_ring" %}selected{% endif %}> Smart Rings</option>
          <option value="batteries" {% if form.category.value == "batteries" %}selected{% endif %}> Batteries</option>
          <option value="other" {% if form.category.value == "other" %}selected{% endif %}> Other</option>
        </select>
        {% if form.category.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.category.errors.0 }}</p>
        {% endif %}
      </div>

      {# Image Upload #}
      <div class="mb-4">
        <label for="id_image" class="block text-gray-700 font-semibold mb-1">Upload Image</label>
        <input
          type="file"
          name="image"
          id="id_image"
          accept="image/*"
          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400"
        />
        {% if form.image.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.image.errors.0 }}</p>
        {% endif %}
      </div>


      <button
        type="submit"
        class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
      >
        ✅ Add Item
      </button>
    </form>
  </div>
</div>
{% endblock %}
