{% extends "base.html" %}
{% load static %}

{% block back_button %}
<a href="javascript:history.back()" class="inline-block bg-gray-300 hover:bg-gray-400 text-black font-bold py-2 px-4 rounded mb-4">
  ⬅️ Назад
</a>
{% endblock %}

{% block content %}
<main class="px-4 flex flex-col items-center">

  <!-- Контейнер формы -->
  <div class="w-full max-w-md p-8 rounded-xl bg-black/30 backdrop-blur-md border border-white/20 shadow-2xl">
    <h1 class="text-2xl font-bold text-center text-green-600 mb-6">Добавить новый товар</h1>

    <!-- Flash-сообщения -->
    {% if messages %}
      <div class="mb-4">
        {% for message in messages %}
          <div class="p-3 rounded text-white {% if message.tags == 'success' %}bg-green-500{% elif message.tags == 'error' %}bg-red-500{% else %}bg-blue-500{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Форма добавления товара -->
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- Название товара -->
      <div class="mb-4">
        <label for="name" class="block text-gray-700 font-semibold mb-1">Название товара</label>
        <input
          type="text"
          name="name"
          id="name"
          class="w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-green-400"
          placeholder="Введите название"
          value="{{ form.name.value|default_if_none:'' }}"
        />
        {% if form.name.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.name.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Цена товара -->
      <div class="mb-4">
        <label for="price" class="block text-gray-700 font-semibold mb-1">Цена товара</label>
        <input
          type="number"
          step="0.01"
          name="price"
          id="price"
          class="w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-green-400"
          placeholder="Введите цену"
          value="{{ form.price.value|default_if_none:'' }}"
        />
        {% if form.price.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.price.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Описание -->
      <div class="mb-4">
        <label for="description" class="block text-gray-700 font-semibold mb-1">Описание товара</label>
        <input
          type="text"
          name="description"
          id="description"
          class="w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-green-400"
          placeholder="Введите описание"
          value="{{ form.description.value|default_if_none:'' }}"
        />
        {% if form.description.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.description.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Категория -->
      <div class="mb-4">
        <label for="category" class="block text-gray-700 font-semibold mb-1">Категория товара</label>
        <select
          name="category"
          id="category"
          class="w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-green-400"
        >
          <option value="">— Выберите категорию —</option>
          <option value="phones" {% if form.category.value == "phones" %}selected{% endif %}>Запчасти для телефонов</option>
          <option value="tablets" {% if form.category.value == "tablets" %}selected{% endif %}>Запчасти для планшетов</option>
          <option value="headphones" {% if form.category.value == "headphones" %}selected{% endif %}>Наушники</option>
          <option value="accessories" {% if form.category.value == "accessories" %}selected{% endif %}>Аксессуары</option>
          <option value="smart_watch" {% if form.category.value == "smart_watch" %}selected{% endif %}>Умные часы</option>
          <option value="smart_ring" {% if form.category.value == "smart_ring" %}selected{% endif %}>Умные кольца</option>
          <option value="batteries" {% if form.category.value == "batteries" %}selected{% endif %}>Аккумуляторы</option>
          <option value="other" {% if form.category.value == "other" %}selected{% endif %}>Другое</option>
        </select>
        {% if form.category.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.category.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Изображение -->
      <div class="mb-4">
        <label for="id_image" class="block text-gray-700 font-semibold mb-1">Загрузить изображение</label>
        <input
          type="file"
          name="image"
          id="id_image"
          accept="image/*"
          class="w-full border border-gray-300 rounded px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-green-400"
        />
        {% if form.image.errors %}
          <p class="text-red-500 text-sm mt-1">{{ form.image.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Кнопка -->
      <button
        type="submit"
        class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
      >
        ✅ Добавить товар
      </button>
    </form>
  </div>
</main>
{% endblock %}
